{
    "AWSTemplateFormatVersion": "2010-09-09",
   "Resources":{
      "SecurityGroupWB":{
         "Type":"AWS::EC2::SecurityGroup",
         "Properties":{
            "GroupName":"csye6225-sg-webapp",
            "GroupDescription":"SecurityGroup to access webapplication",
            "SecurityGroupIngress":[
               {
                  "CidrIp":"0.0.0.0/0",
                  "Description":"To allow world for port 80",
                  "FromPort":"80",
                  "ToPort":"80",
                  "IpProtocol":"TCP"
               },
               {
                  "CidrIp":"0.0.0.0/0",
                  "Description":"To allow world for port 22",
                  "FromPort":"22",
                  "ToPort":"22",
                  "IpProtocol":"TCP"
               },
               {
                  "CidrIp":"0.0.0.0/0",
                  "Description":"To allow world for port 443",
                  "FromPort":"8080",
                  "ToPort":"8080",
                  "IpProtocol":"TCP"
               }
            ],
            "Tags":[
               {
                  "Key":"Name",
                  "Value":"SecurityGroupWB"
               }
            ],
          }
        },
"EC2Instance":{
        "Type":"AWS::EC2::Instance",
        "Properties":{
           "DisableApiTermination":"false",
           "ImageId":"ami-042554f1d6ca20e4d",
           "InstanceType":"t2.micro",
           "AvailabilityZone":"us-east-1a",
           "SubnetId": "subnet-0df4290e1a46b8199",
           "KeyName":"first",
           "Volumes":[
              {
                 "Device":"/dev/sda2",
                 "VolumeId":{
                    "Ref":"NewVolume"
                 }
              }
           ],
           "Tags":[
              {
                 "Key":"Name",
                 "Value":"EC2Webapplication"
              }
],
}
},
"NewVolume":{
        "Type":"AWS::EC2::Volume",
        "Properties":{
           "Size":"20",
           "VolumeType":"gp2",
           "AvailabilityZone":"us-east-1a",
           "Tags":[
              {
                 "Key":"Name",
                 "Value":"EC2AppVolume"
              }
           ]
        }
},
}
}
